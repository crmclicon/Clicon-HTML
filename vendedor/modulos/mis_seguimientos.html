<!-- Contenedor para los seguimientos -->
<div id="seguimientosContainer"></div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";
  import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore.js";

  // Configuración Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyDw4amrnoIcj1nvBeOlchzv5kBaD_sVSoE",
    authDomain: "clicon-oficial.firebaseapp.com",
    projectId: "clicon-oficial",
    storageBucket: "clicon-oficial.appspot.com",
    messagingSenderId: "604078149403",
    appId: "1:604078149403:web:5da069e8254c3695028dbe"
  };

  // Inicialización
  const app = initializeApp(firebaseConfig);
  const auth = getAuth();
  const db = getFirestore();

  // Mostrar seguimientos apenas el usuario esté logueado
  onAuthStateChanged(auth, async (user) => {
    if (!user) {
      alert("Debes iniciar sesión");
      return;
    }

    const email = user.email;
    const container = document.getElementById("seguimientosContainer");
    container.innerHTML = "";

    const q = query(collection(db, "seguimientos"), where("designado", "==", email));
    const querySnapshot = await getDocs(q);

    querySnapshot.forEach((doc) => {
      const data = doc.data();

      // Contenedor estilizado
      const card = document.createElement("div");
      card.style.border = "1px solid #ddd";
      card.style.borderRadius = "12px";
      card.style.background = "#F8FBFF";
      card.style.padding = "16px";
      card.style.marginBottom = "16px";
      card.style.boxShadow = "0 2px 6px rgba(0,0,0,0.1)";
      card.style.fontFamily = "SF Pro Display, sans-serif";
      card.style.fontSize = "14px";

      // Mostrar todos los campos
      let html = "";
      for (const campo in data) {
        html += `<div style="margin-bottom:4px;"><strong>${campo}:</strong> ${data[campo]}</div>`;
      }

      card.innerHTML = html;
      container.appendChild(card);
    });
  });
</script>
